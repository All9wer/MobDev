# Практическое задание №2

## Введение

Ключевым компонентом для создания визуального интерфейса в приложениях
«Android» является «activity» (активность), как правило ассоциируемая с отдельным
экраном или окном приложения, а переключение между окнами производится как
перемещение от одной «activity» к другой. Учет размера экрана устройства является
одним из важнейших факторов при разработке мобильного приложения. Зачастую
отсутствует возможность размещения всех элементов приложения на одном экране.
Очевидным решением данной проблемы является разделение интерфейса на
функциональные части:

- использование различных сообщений (диалоговые окна, уведомления,
всплывающие подсказки) – способ наиболее простой и не требует редактирования
файла манифеста, однако таким образом возможно решить только часть задач;
- использование в одном приложении нескольких «activity» – способ
является универсальным и подходит для любых приложений, но не самый
оптимальный с точки зрения производительности и количества генерируемого кода;
- разместить компоненты на активности таким образом, что в нужный
момент возможно будет легко переключиться на работу с другой частью
интерфейса;
- использовать собственные экраны и отображать их на «activity» в
зависимости от состояния приложения.

## 2.4 Контрольное задание

Требуется создать новый проект «ru.mirea.«фамилия».Lesson2».
Создайте модуль «ActivityLifecycle». В созданном классе изначально присутствует
реализация только метода «onCreate». Требуется переопределить основные
методы жизненного цикла родительского класса, рассмотренные выше. Для
создания метода возможно произвести ввод названия метода, среда разработки
отобразит всплывающее меню с доступными методами

Создание модуля "ActivityLifecycle":
![alt text](img/image.png)

Требуется добавить в разметку «activity_main.xml» поле текстового ввода
«EditText» и реализовать отображение состояния «activity» используя класс «Log».
Каждый метод жизненного цикла должен содержать сообщение, содержащее имя
метода жизненного цикла. Стоит обратить внимание, что методы жизненного цикла
выделяются аннотацией «@Override»:

```java
@Override
protected void onStart() {
 super.onStart();
 Log.i(TAG, "onStart()");
}
```

![alt text](img/image1.png)

Настройка AndroidManifest.xml:

![alt text](img/image2.png)

Запуск приложения и просмотр логов в Logcat:

![alt text](img/image3.png)

Проверка поведения:

- При вводе текста в EditText и дальнейшем сворачивании приложения видим сохранение состояния

![alt text](img/image4.png)

- При вводе текста в EditText,нажатии кнопки "Back" и дальнейшем закрытии приложения

![alt text](img/image5.png)

Контрольные вопросы:

1. Будет ли вызван метод «onCreate» после нажатия на кнопку «Home» и возврата в приложение?

    > Нет, метод onCreate() не будет вызван. При нажатии кнопки Home система переводит приложение в фоновое состояние (onPause(),onStop()). А при возврате происходит возобновление (onRestart(), onStart(), onResume())

2. Изменится ли значение поля «EditText» после нажатия на кнопку «Home» и
возврата в приложение?

    > Нет, значение сохранится. система автоматически сохраняет состояние при вызове onSaveInstanceState(). При возврате система вызывает onRestoreInstanceState(), и EditText восстанавливает своё содержимое

3. Изменится ли значение поля «EditText» после нажатия на кнопку «Back» и
возврата в приложение?
    > Да, значение сбросится. (Я отключил сохранение состояния при нажатии Back в настройках разработчиков). Система завершает работу приложения, вызывая onPause(), onStop(), onDestroy(), а при повторном запуске onCreate(), onStart(), onResume().

## 3.4 Вызов активности

### 3.4.1 Явные намерения

Создать новый модуль. В меню «File | New | New Module | Phone & Tablet Module |
Empty Views Activity». Название проекта «MultiActivity».

Создание нового модуля MultiActivity:

![alt text](img/image6.png)

Экран создания «activity»:

![alt text](img/image7.png)

Автоматическое добавление записи в манифест-файл:

![alt text](img/image8.png)

Содержание файла MainActivity.java:

![alt text](img/image9.png)

Добавление "TextView" в файл разметки "activity_second.xml":

![alt text](img/image10.png)

Результат:

![alt text](img/image11.png)

![alt text](img/image12.png)

## 3.4.2 Неявные намерения

Для открытия новой активности (браузера) требуется указать web-адрес
страницы. При этом исходная активность приостанавливается и переходит в
фоновый режим. Нажатие кнопки «Back» приводит к открытию исходной
активности. Стоит обратить внимание, что не указывается конкретный
идентификатор активности или программа типа «Chrome», «Opera» и т.п. В каждом
случае ОС «Android» находит соответствующую активность, чтобы ответить на
намерение, инициализируя её в случае необходимости.

Файл activity_main.xml:

![alt text](img/image13.png)

Файл MainActivity.java:

![alt text](img/image14.png)

Запуск приложения:

![alt text](img/image15.png)

Активация кнопки "Открыть сайт МИРЭА":

![alt text](img/image16.png)

Активация кнопки "Поделиться ФИО":

![alt text](img/image17.png)

## Самостоятельная работа

Создать 3 класса и сконструировать диалоговые окна:
- MyTimeDialogFragment;
- MyDateDialogFragment;
- MyProgressDialogFragment.
Добавить в activity_main.xml 3 кнопки и реализовать вызов данных окон

Класс MyTimeDialogFragment:

![alt text](img/image18.png)

Класс MyDateDialogFragment:

![alt text](img/image19.png)

Класс MyProgressDialogFragment:

![alt text](img/image20.png)

Итоговый вид приложения:

![alt text](/Mobile/lab2/img/image21.png)

Активация кнопки "Время":

![alt text](img/image22.png)

Активация кнопки "Дата":

![alt text](img/image23.png)

Активация кнопки "Индикатор":

![alt text](img/image24.png)